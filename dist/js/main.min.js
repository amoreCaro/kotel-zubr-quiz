function setUkrainianDatepicker(e){return e.regional.uk={closeText:"Закрити",prevText:"<",nextText:">",currentText:"Сьогодні",monthNames:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthNamesShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],dayNames:["неділя","понеділок","вівторок","середа","четвер","п’ятниця","субота"],dayNamesShort:["нед","пнд","вів","срд","чтв","птн","сбт"],dayNamesMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Тиж",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.setDefaults(e.regional.uk),e.regional.uk}function initDatepicker(e){e((function(){e.datepicker.setDefaults(e.datepicker.regional.uk),e("#datepicker").datepicker({nextText:">",prevText:"<"})}))}function initFilters(e){e("body").on("click",".toggle-filters",(function(){let t=e(this),i=e(".range-slider-wrapper"),r=e(".advanced-filters");t.html("Show advanced filters"),i.removeClass("filters-expanded"),r.slideUp(),e(".slider").each((function(){let t=Number(e(this).attr("data-value"));e(this).slider({value:t,range:"min",slide:function(t,i){let r=i.value;r>999&&(r=r/1e3+"k"),e(this).find(".value").html(r).attr("data-selected-value",i.value)}})}))}))}function initFormSteps(e){const t=e(".form-step"),i=e(".quiz__form__btn--back"),r=e(".quiz__form__btn--next");let o=0;function s(){e(".form-step").each((function(t,i){e(i).removeClass("active")})),e(e(".form-step")[o]).addClass("active"),t.length-1===o?(e(".quiz__title__text").text("Вітаємо! Ви пройшли опитування і отримали свій подарунок - 1 500 грн."),e(".quiz__header").css({"padding-right":"13px"}),e(".quiz__title__text").css({"font-size":"24px"}),e(".quiz__title__counter").css({display:"none"}),e(".quiz__title__icon").css({display:"none"}),e(`#step-${o+1} input`).focus()):(e(".quiz__title__text").text("Пройдіть тест і отримаєте подарунок 1500 грн на покупку комплектуючих"),e(".quiz__header").css({"padding-right":"45px"}),e(".quiz__title__text").css({"font-size":"14px"}),e(".quiz__title__counter").css({display:"block"}),e(".quiz__title__icon").css({display:"inline-block"}))}function n(){const t=o/(e(".form-step").length-1)*100;e(".progressbar__counter").css("width",`${t}%`),e(".quiz__title__counter").text(`${o+1}/${e(".form-step").length-1}`)}function a(){var t=e(`#step-${o+1} input`),i=!1,r=!0,s=!0;return t.each((function(){if("range"===e(this).attr("type"))return!0;if("checkbox"===e(this).attr("type"))e(this).prop("checked")&&(i=!0);else if("text"===e(this).attr("type"))""===e(this).val().trim()&&(r=!1);else if(e(this).is('input[type="tel"]')){var t=e(this).val().trim();""!==t&&/^\(\d{3}\) \d{3}-\d{4}$/.test(t)||(s=!1)}})),!i&&t.is(":checkbox")?(e(`#step-${o+1} .quiz__form__warning`).addClass("quiz__form__warning-show"),e(`#step-${o+1} .product-card__img img`).css({border:"1px solid red"}),e(`#step-${o+1} .input-checkbox-style`).css({border:"2px solid red"}),!1):!r&&t.is(":text")?(e(`#step-${o+1} .quiz__form__warning`).addClass("quiz__form__warning-show"),e(`#step-${o+1} .quiz__form__container`).addClass("quiz__form__container--error"),!1):!s&&t.is('input[type="tel"]')?(e(`#step-${o+1} .quiz__form__warning`).addClass("quiz__form__warning-show"),e(".input__wrapper--focus .focus-border--error").css({display:"block"}),e(".input__wrapper--focus .focus-border--valid").css({display:"none"}),e(`#step-${o+1} .quiz__form__container input`).focus(),!1):(e(`#step-${o+1} .quiz__form__warning`).removeClass("quiz__form__warning-show"),e(`#step-${o+1} .quiz__form__container`).removeClass("quiz__form__container--error"),e(`#step-${o+1} .quiz__form__container`).removeClass("quiz__form__container--error-phone"),e(`#step-${o+1} .product-card__img img`).css({border:"none"}),e(`#step-${o+1} .input-checkbox-style`).css({border:"2px solid #23b94a"}),!0)}r.each((function(){e(this).on("click",(function(e){e.preventDefault(),a()&&o<t.length-1&&(o++,s(),n())}))})),i.each((function(){e(this).on("click",(function(e){e.preventDefault(),o--,s(),n()}))}))}function initPhoneMask(e){e("#phone-input").inputmask("(999) 999-9999")}function initProductCardSelection(e){let t=[];e(document).on("click",".popup__product-card",(function(i){let r=e(this),o=r.attr("id"),s=r.find(".quiz__product-card__checkbox"),n=t.indexOf(o);-1!==n?(t.splice(n,1),s.prop("checked",!1),r.find(".checkmark").remove(),r.removeClass("product-card--checked")):(t.push(o),s.prop("checked",!0),r.append('<span class="checkmark"></span>'),r.addClass("product-card--checked"))}))}function initSliders(){$(".slider").each((function(){let e=Number($(this).attr("data-min")),t=Number($(this).attr("data-max")),i=Number($(this).attr("data-value")),r=Number($(this).attr("data-step")),o=$(this);o.slider({range:"min",value:i,min:e,max:t,step:r,slide:function(e,t){let i=t.value;$(this).find(".value").html(i).attr("data-selected-value",t.value),$(this).siblings('input[type="range"]').val(i)}});let s=o.find(".ui-slider-handle"),n=s.parent().attr("data-value");s.append('<span id="rangeSliderCurrentValue" class="value min-value" data-selected-value="'+n+'"></span>'),o.find(".value").html(i)}))}function initPopupLogic(e){e("#show-quiz-modal").click((function(){e("#quiz-poup").addClass("quiz__popup-show"),e(".quiz__body").css({opacity:"1",transform:"translateY(0) scale(1)"})})),e(document).on("click",(function(t){e(t.target).closest(".quiz__body").length||e(t.target).is("#show-quiz-modal")||e(t.target).is(".ui-datepicker-prev")||e(t.target).is(".ui-datepicker-next")||e(t.target).is(".ui-icon")||e(t.target).closest("#ui-datepicker-div").length||(e(".quiz__body").css({opacity:"0",transform:"translateY(30%) scale(.9)"}),e("#quiz-poup").removeClass("quiz__popup-show"))})),e("#btn-submit").on("click",(function(t){t.preventDefault(),c()&&(e("#quiz-form").submit(),e(".popup__successful_application").addClass("popup__successful_application--visible"))}))}function setQuizPopUpLogic(){!function(e){"use strict";"function"==typeof define&&define.amd?define(["../widgets/datepicker"],e):e(jQuery.datepicker)}((function(e){"use strict";return setUkrainianDatepicker(e)})),jQuery(document).ready((function(e){initPopupLogic(e),initPhoneMask(e),initFilters(e),initSliders(),initDatepicker(e),initProductCardSelection(e),initFormSteps(e)}))}export function setupEventListeners(e,t,i,r){const{nextButtons:o,prevButtons:s,submitFormButtons:n,radioButtons:a}=e;o.forEach((o=>o.addEventListener("click",(o=>r.handleNextClick(o,e,t,i))))),s.forEach((o=>o.addEventListener("click",(o=>r.handlePrevClick(o,e,t,i))))),n.forEach((o=>o.addEventListener("click",(o=>r.handleSubmitClick(o,e,t,i))))),a.forEach((o=>{o.addEventListener("click",(()=>{o.checked=!0;o.closest(".quiz__option--custom")||setTimeout((()=>r.handleNextClick(null,e,t,i)),550)}))}))}import updateButtonsState from"./updateButtonsState.js";import updateProgressBar from"./updateProgressBar.js";import updateGiftRadioSelection from"./updateGiftRadioSelection.js";import{handleNextClick,handlePrevClick,handleSubmitClick}from"./steps.js";import{setupEventListeners}from"./events.js";export default function progressbar(){const e=document.querySelector(".quiz__progressbar-fill"),t=document.querySelector(".quiz__stepcounter span"),i=document.querySelectorAll(".quiz__button--next"),r=document.querySelectorAll(".quiz__button--prev"),o=document.querySelectorAll(".quiz__button--submit"),s=document.querySelectorAll(".quiz__radio"),n=Array.from(document.querySelectorAll(".quiz__fieldsets .quiz__fieldset")),a=document.querySelector(".quiz__bottom"),c=document.querySelector(".quiz__form"),u=n.find((e=>e.querySelector(".quiz__success-wrapper"))),l=n.filter((e=>e!==u));let d={currentStep:1};const p=l.length,f={progressFill:e,counterElement:t,nextButtons:i,prevButtons:r,submitFormButtons:o,radioButtons:s,quizBottom:a,form:c,fieldsets:n,successFieldset:u,stepsFieldsets:l};l[0].classList.add("active"),updateProgressBar(f,d,p),updateButtonsState(f,d,p),setupEventListeners(f,d,p,{handleNextClick:handleNextClick,handlePrevClick:handlePrevClick,handleSubmitClick:handleSubmitClick,updateGiftRadioSelection:updateGiftRadioSelection}),l.forEach((e=>{updateGiftRadioSelection(f,d,p)}))}export default function quizBottomMenuFixed(){const e=document.querySelector(".quiz__bottom"),t=document.querySelector(".quiz__form");function i(){if(window.innerWidth>640)return void e.classList.remove("fixed");const i=t.getBoundingClientRect(),r=window.innerHeight;i.top+i.height/2<=r&&i.bottom>r?e.classList.add("fixed"):e.classList.remove("fixed")}e&&t&&(i(),window.addEventListener("scroll",i),window.addEventListener("resize",i))}export default function quizSlider(){const e=document.querySelectorAll(".quiz__range-input"),t=document.querySelectorAll(".quiz__range-bubble");function i(e,t){const i=(e.value-e.min)/(e.max-e.min)*100;t.textContent=e.value,t.style.left=`calc(${i}% - ${t.offsetWidth/2}px)`,e.style.setProperty("--range-percent",`${i}%`)}e.forEach(((e,r)=>{const o=t[r];i(e,o),e.addEventListener("input",(()=>{i(e,o)}))}))}export default function setupCustomOptionToggle(){const e=document.querySelector(".quiz__option.quiz__option--custom");if(!e)return;const t=e.querySelector(".quiz__option-text"),i=e.querySelector(".quiz__option-input-text");""!==i.value.trim()?(i.style.display="block",t.style.display="none",e.classList.add("active")):(i.style.display="none",t.style.display="block",e.classList.remove("active")),e.addEventListener("click",(function(){e.classList.add("active"),i.style.display="block",t.style.display="none",i.focus()})),i.addEventListener("input",(function(){""!==i.value.trim()?t.style.display="none":t.style.display="block"})),document.addEventListener("click",(function(r){e.contains(r.target)||""===i.value.trim()&&(e.classList.remove("active"),i.style.display="none",t.style.display="block")}))}export default function setupPhoneInput(e="#phone"){const t=document.querySelector(e);if(!t)return null;const i=window.intlTelInput(t,{initialCountry:"ua",geoIpLookup:function(e){fetch("https://ipapi.co/json").then((e=>e.json())).then((t=>e(t.country_code))).catch((()=>e("ua")))},nationalMode:!1,autoHideDialCode:!1,formatOnDisplay:!0,separateDialCode:!0,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"});return t.addEventListener("keydown",(e=>{const i=document.querySelector(".iti__selected-dial-code")?.textContent?.trim();"Backspace"===e.key&&t.value.trim().startsWith(i)&&t.selectionStart<=i.length&&e.preventDefault()})),i}import updateButtonsState from"./updateButtonsState.js";import updateProgressBar from"./updateProgressBar.js";import{validateName,validatePhone}from"./validators.js";function validateStep(e){const t=e.querySelectorAll(".quiz__radio");if(!t.length)return!0;const i=Array.from(t).find((e=>e.checked));if(!i)return e.querySelector(".quiz__options")?.classList.add("error"),!1;const r=i.closest(".quiz__option--custom");if(r){const t=r.querySelector(".quiz__option-input-text");if(!t||!t.value.trim())return e.querySelector(".quiz__options")?.classList.add("error"),!1}return e.querySelector(".quiz__options")?.classList.remove("error"),!0}export function handleNextClick(e,t,i,r){if(e&&e.preventDefault(),!t||!t.stepsFieldsets)return void console.error("elements or elements.stepsFieldsets is undefined.");const{stepsFieldsets:o}=t;if(!i||"number"!=typeof i.currentStep||i.currentStep<1)return void console.error("Invalid state or state.currentStep:",i);if(!o||0===o.length)return void console.error("stepsFieldsets is missing or invalid.");const s=Array.isArray(o)?o:Array.from(o),n=s[i.currentStep-1];if(n)if(validateStep(n))if(i.currentStep<r){s.forEach((e=>e.classList.remove("active"))),i.currentStep++,console.log(`Moved to next step: ${i.currentStep}`);s[i.currentStep-1].classList.add("active"),updateProgressBar(t,i,r),updateButtonsState(t,i,r)}else console.log("No more steps to move to.");else console.log("Current step is invalid.");else console.error("No fieldset found for current step:",i.currentStep)}export function handlePrevClick(e,t,i,r){e.preventDefault();const{stepsFieldsets:o}=t;if(console.log(`Current step before going back: ${i.currentStep}`),o.forEach((e=>e.classList.remove("active"))),i.currentStep>1){i.currentStep--,console.log(`Moved back to step: ${i.currentStep}`);o[i.currentStep-1].classList.add("active"),updateProgressBar(t,i,r),updateButtonsState(t,i,r)}console.log(`Step after going back: ${i.currentStep}`)}export function handleSubmitClick(e,t,i,r){e.preventDefault();const{stepsFieldsets:o,successFieldset:s,progressFill:n,counterElement:a,nextButtons:c,prevButtons:u,submitFormButtons:l,quizBottom:d,form:p}=t,f=o[i.currentStep-1];if(!validateStep(f))return;const m=f.querySelector('input[name="name"]'),_=f.querySelector('input[name="phone"]'),h=f.querySelector(".quiz__error--name"),v=f.querySelector(".quiz__error--phone");if(!m||!_)return void console.error("Не знайдено поля name або phone!");m.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^a-zA-Zа-яА-ЯёЁЇїІіЄєҐґ\s]/g,"")})),_.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^0-9]/g,"")}));const g=validateName(m,h),q=validatePhone(_,v);if(g&&q){if(p){const e=new FormData(p),t=Object.fromEntries(e.entries());console.log("Form Data:",t)}f.classList.remove("active"),s.classList.add("active"),n.style.width="100%",a.textContent=`Крок: ${r}/${r}`,[c,u,l].forEach((e=>e.forEach((e=>e.classList.add("hidden"))))),d.classList.add("disabled")}}export default function updateButtonsState(e,t,i){const{prevButtons:r,nextButtons:o,submitFormButtons:s,quizBottom:n,successFieldset:a}=e;r?o?s?(r.forEach((e=>{e.disabled=1===t.currentStep,e.classList.toggle("disabled",1===t.currentStep)})),o.forEach((e=>e.classList.toggle("hidden",t.currentStep>=i))),s.forEach((e=>e.classList.toggle("hidden",t.currentStep!==i))),n&&n.classList.toggle("disabled",a.classList.contains("active"))):console.error("submit button are missing."):console.error("next button are missing."):console.error("prev buttons are missing.")}import updateButtonsState from"./updateButtonsState.js";import updateProgressBar from"./updateProgressBar.js";export default function updateGiftRadioSelection(e,t,i){if(!t)return void console.error("State object is undefined.");const r=document.querySelectorAll(".quiz__gifts");0!==r.length?r.forEach((r=>{const o=r.querySelectorAll(".quiz__gift");o.forEach((r=>{const s=r.querySelector('input[type="radio"][name="gift"]');s?.checked&&(o.forEach((e=>e.classList.remove("checked"))),r.classList.add("checked")),r.dataset.listenerAdded||(r.addEventListener("click",(()=>{o.forEach((e=>e.classList.remove("checked"))),s.checked=!0,r.classList.add("checked");const n=document.querySelector(".quiz__fieldsets"),a=n?.querySelectorAll(".quiz__fieldset");if(a&&a.length>0){const o=Array.from(a).indexOf(r.closest(".quiz__fieldset")),s=a[o+1];if(s){n.querySelector(".quiz__fieldset.active")?.classList.remove("active"),s.classList.add("active"),t.currentStep=o+2,updateProgressBar(e,t,i),updateButtonsState(e,t,i)}}})),r.dataset.listenerAdded="true")}))})):console.error("Не знайдено контейнерів подарунків.")}export default function updateProgressBar(e,t,i){const{progressFill:r,counterElement:o}=e;r?o?(r.style.width=t.currentStep/i*100+"%",o.textContent=`Крок: ${t.currentStep}/${i}`):console.error("Progress counter element is missing."):console.error("Progress Fill element is missing.")}export function validateName(e,t){const i=e.value.trim();return i&&/^[a-zA-Zа-яА-ЯёЁЇїІіЄєҐґ\s]+$/.test(i)?(e.classList.remove("error"),t?.classList.remove("active"),!0):(e.classList.add("error"),t?.classList.add("active"),!1)}export function validatePhone(e,t){const i=e.value.trim();return i&&/^[0-9]{7,12}$/.test(i)?(e.classList.remove("error"),t?.classList.remove("active"),!0):(e.classList.add("error"),t?.classList.add("active"),!1)}import quizSlider from"./components/quiz/quizSlider.js";import setupCustomOptionToggle from"./components/quiz/setupCustomOptionToggle.js";import setupPhoneInput from"./components/quiz/setupPhoneInput.js";import quizBottomMenuFixed from"./components/quiz/quizBottomMenuFixed.js";import progressbar from"./components/quiz/progressbar.js";document.addEventListener("DOMContentLoaded",(function(){setupPhoneInput(),quizSlider(),setupCustomOptionToggle(),quizBottomMenuFixed(),progressbar()}));