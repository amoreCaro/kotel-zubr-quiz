function setUkrainianDatepicker(e){return e.regional.uk={closeText:"Закрити",prevText:"<",nextText:">",currentText:"Сьогодні",monthNames:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthNamesShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],dayNames:["неділя","понеділок","вівторок","середа","четвер","п’ятниця","субота"],dayNamesShort:["нед","пнд","вів","срд","чтв","птн","сбт"],dayNamesMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Тиж",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.setDefaults(e.regional.uk),e.regional.uk}function initDatepicker(e){e((function(){e.datepicker.setDefaults(e.datepicker.regional.uk),e("#datepicker").datepicker({nextText:">",prevText:"<"})}))}function initFilters(e){e("body").on("click",".toggle-filters",(function(){let t=e(this),i=e(".range-slider-wrapper"),r=e(".advanced-filters");t.html("Show advanced filters"),i.removeClass("filters-expanded"),r.slideUp(),e(".slider").each((function(){let t=Number(e(this).attr("data-value"));e(this).slider({value:t,range:"min",slide:function(t,i){let r=i.value;r>999&&(r=r/1e3+"k"),e(this).find(".value").html(r).attr("data-selected-value",i.value)}})}))}))}function initFormSteps(e){const t=e(".form-step"),i=e(".quiz__form__btn--back"),r=e(".quiz__form__btn--next");let s=0;function o(){e(".form-step").each((function(t,i){e(i).removeClass("active")})),e(e(".form-step")[s]).addClass("active"),t.length-1===s?(e(".quiz__title__text").text("Вітаємо! Ви пройшли опитування і отримали свій подарунок - 1 500 грн."),e(".quiz__header").css({"padding-right":"13px"}),e(".quiz__title__text").css({"font-size":"24px"}),e(".quiz__title__counter").css({display:"none"}),e(".quiz__title__icon").css({display:"none"}),e(`#step-${s+1} input`).focus()):(e(".quiz__title__text").text("Пройдіть тест і отримаєте подарунок 1500 грн на покупку комплектуючих"),e(".quiz__header").css({"padding-right":"45px"}),e(".quiz__title__text").css({"font-size":"14px"}),e(".quiz__title__counter").css({display:"block"}),e(".quiz__title__icon").css({display:"inline-block"}))}function n(){const t=s/(e(".form-step").length-1)*100;e(".progressbar__counter").css("width",`${t}%`),e(".quiz__title__counter").text(`${s+1}/${e(".form-step").length-1}`)}function a(){var t=e(`#step-${s+1} input`),i=!1,r=!0,o=!0;return t.each((function(){if("range"===e(this).attr("type"))return!0;if("checkbox"===e(this).attr("type"))e(this).prop("checked")&&(i=!0);else if("text"===e(this).attr("type"))""===e(this).val().trim()&&(r=!1);else if(e(this).is('input[type="tel"]')){var t=e(this).val().trim();""!==t&&/^\(\d{3}\) \d{3}-\d{4}$/.test(t)||(o=!1)}})),!i&&t.is(":checkbox")?(e(`#step-${s+1} .quiz__form__warning`).addClass("quiz__form__warning-show"),e(`#step-${s+1} .product-card__img img`).css({border:"1px solid red"}),e(`#step-${s+1} .input-checkbox-style`).css({border:"2px solid red"}),!1):!r&&t.is(":text")?(e(`#step-${s+1} .quiz__form__warning`).addClass("quiz__form__warning-show"),e(`#step-${s+1} .quiz__form__container`).addClass("quiz__form__container--error"),!1):!o&&t.is('input[type="tel"]')?(e(`#step-${s+1} .quiz__form__warning`).addClass("quiz__form__warning-show"),e(".input__wrapper--focus .focus-border--error").css({display:"block"}),e(".input__wrapper--focus .focus-border--valid").css({display:"none"}),e(`#step-${s+1} .quiz__form__container input`).focus(),!1):(e(`#step-${s+1} .quiz__form__warning`).removeClass("quiz__form__warning-show"),e(`#step-${s+1} .quiz__form__container`).removeClass("quiz__form__container--error"),e(`#step-${s+1} .quiz__form__container`).removeClass("quiz__form__container--error-phone"),e(`#step-${s+1} .product-card__img img`).css({border:"none"}),e(`#step-${s+1} .input-checkbox-style`).css({border:"2px solid #23b94a"}),!0)}r.each((function(){e(this).on("click",(function(e){e.preventDefault(),a()&&s<t.length-1&&(s++,o(),n())}))})),i.each((function(){e(this).on("click",(function(e){e.preventDefault(),s--,o(),n()}))}))}function initPhoneMask(e){e("#phone-input").inputmask("(999) 999-9999")}function initProductCardSelection(e){let t=[];e(document).on("click",".popup__product-card",(function(i){let r=e(this),s=r.attr("id"),o=r.find(".quiz__product-card__checkbox"),n=t.indexOf(s);-1!==n?(t.splice(n,1),o.prop("checked",!1),r.find(".checkmark").remove(),r.removeClass("product-card--checked")):(t.push(s),o.prop("checked",!0),r.append('<span class="checkmark"></span>'),r.addClass("product-card--checked"))}))}function initSliders(){$(".slider").each((function(){let e=Number($(this).attr("data-min")),t=Number($(this).attr("data-max")),i=Number($(this).attr("data-value")),r=Number($(this).attr("data-step")),s=$(this);s.slider({range:"min",value:i,min:e,max:t,step:r,slide:function(e,t){let i=t.value;$(this).find(".value").html(i).attr("data-selected-value",t.value),$(this).siblings('input[type="range"]').val(i)}});let o=s.find(".ui-slider-handle"),n=o.parent().attr("data-value");o.append('<span id="rangeSliderCurrentValue" class="value min-value" data-selected-value="'+n+'"></span>'),s.find(".value").html(i)}))}function initPopupLogic(e){e("#show-quiz-modal").click((function(){e("#quiz-poup").addClass("quiz__popup-show"),e(".quiz__body").css({opacity:"1",transform:"translateY(0) scale(1)"})})),e(document).on("click",(function(t){e(t.target).closest(".quiz__body").length||e(t.target).is("#show-quiz-modal")||e(t.target).is(".ui-datepicker-prev")||e(t.target).is(".ui-datepicker-next")||e(t.target).is(".ui-icon")||e(t.target).closest("#ui-datepicker-div").length||(e(".quiz__body").css({opacity:"0",transform:"translateY(30%) scale(.9)"}),e("#quiz-poup").removeClass("quiz__popup-show"))})),e("#btn-submit").on("click",(function(t){t.preventDefault(),c()&&(e("#quiz-form").submit(),e(".popup__successful_application").addClass("popup__successful_application--visible"))}))}function setQuizPopUpLogic(){!function(e){"use strict";"function"==typeof define&&define.amd?define(["../widgets/datepicker"],e):e(jQuery.datepicker)}((function(e){"use strict";return setUkrainianDatepicker(e)})),jQuery(document).ready((function(e){initPopupLogic(e),initPhoneMask(e),initFilters(e),initSliders(),initDatepicker(e),initProductCardSelection(e),initFormSteps(e)}))}export function setupEventListeners(e,t,i,r){const{nextButtons:s,prevButtons:o,submitFormButtons:n,radioButtons:a}=e;s.forEach((s=>s.addEventListener("click",(s=>r.handleNextClick(s,e,t,i))))),o.forEach((s=>s.addEventListener("click",(s=>r.handlePrevClick(s,e,t,i))))),n.forEach((s=>s.addEventListener("click",(s=>r.handleSubmitClick(s,e,t,i))))),a.forEach((s=>{s.addEventListener("click",(()=>{s.checked=!0;s.closest(".quiz__option--custom")||setTimeout((()=>r.handleNextClick(null,e,t,i)),550)}))}))}import updateButtonsState from"./updateButtonsState.js";import updateProgressBar from"./updateProgressBar.js";import updateGiftRadioSelection from"./updateGiftRadioSelection.js";import{handleNextClick,handlePrevClick,handleSubmitClick}from"./steps.js";import{setupEventListeners}from"./events.js";import{validateName,validatePhone}from"./validators.js";export default function progressbar(){const e=document.querySelector(".quiz__progressbar-fill"),t=document.querySelector(".quiz__stepcounter span"),i=document.querySelectorAll(".quiz__button--next"),r=document.querySelectorAll(".quiz__button--prev"),s=document.querySelectorAll(".quiz__button--submit"),o=document.querySelectorAll(".quiz__radio"),n=Array.from(document.querySelectorAll(".quiz__fieldsets .quiz__fieldset")),a=document.querySelector(".quiz__bottom"),c=document.querySelector(".quiz__form"),u=n.find((e=>e.querySelector(".quiz__success-wrapper"))),l=n.filter((e=>e!==u));let d={currentStep:1};const p=l.length,m={progressFill:e,counterElement:t,nextButtons:i,prevButtons:r,submitFormButtons:s,radioButtons:o,quizBottom:a,form:c,fieldsets:n,successFieldset:u,stepsFieldsets:l};l[0].classList.add("active"),updateProgressBar(m,d,p),updateButtonsState(m,d,p),l.forEach((e=>{validateName(e),validatePhone(e)})),setupEventListeners(m,d,p,{handleNextClick:handleNextClick,handlePrevClick:handlePrevClick,handleSubmitClick:handleSubmitClick,updateGiftRadioSelection:updateGiftRadioSelection}),l.forEach((()=>{updateGiftRadioSelection(m,d,p)}))}export default function quizBottomMenuFixed(){const e=document.querySelector(".quiz__bottom"),t=document.querySelector(".quiz__form");function i(){if(window.innerWidth>640)return void e.classList.remove("fixed");const i=t.getBoundingClientRect(),r=window.innerHeight;i.top+i.height/2<=r&&i.bottom>r?e.classList.add("fixed"):e.classList.remove("fixed")}e&&t&&(i(),window.addEventListener("scroll",i),window.addEventListener("resize",i))}export default function quizSlider(){const e=document.querySelectorAll(".quiz__range-input"),t=document.querySelectorAll(".quiz__range-bubble");function i(e,t){const i=(e.value-e.min)/(e.max-e.min)*100;t.textContent=e.value,t.style.left=`calc(${i}% - ${t.offsetWidth/2}px)`,e.style.setProperty("--range-percent",`${i}%`)}e.forEach(((e,r)=>{const s=t[r];i(e,s),e.addEventListener("input",(()=>{i(e,s)}))}))}export default function setupCustomOptionToggle(){const e=document.querySelector(".quiz__option.quiz__option--custom");if(!e)return;const t=e.querySelector(".quiz__option-input"),i=document.querySelector(".quiz__button--next");e.addEventListener("click",(()=>{e.classList.add("active"),t.focus()})),t.addEventListener("input",(()=>{e.classList.toggle("has-value",""!==t.value.trim())})),document.addEventListener("click",(r=>{const s=i&&i.contains(r.target);e.contains(r.target)||s?e.contains(r.target)&&e.classList.remove("show-text"):(e.classList.toggle("show-text",""!==t.value.trim()),e.classList.toggle("active",""!==t.value.trim()),e.classList.toggle("has-value",""!==t.value.trim()))})),""!==t.value.trim()&&e.classList.add("active","has-value"),i&&i.addEventListener("click",(()=>{""!==t.value.trim()&&e.classList.add("has-value")}))}export default function setupPhoneInput(e="#phone"){const t=document.querySelector(e);if(!t)return null;const i=window.intlTelInput(t,{initialCountry:"ua",geoIpLookup:function(e){fetch("https://ipapi.co/json").then((e=>e.json())).then((t=>e(t.country_code))).catch((()=>e("ua")))},nationalMode:!1,autoHideDialCode:!1,formatOnDisplay:!0,separateDialCode:!0,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"});return t.addEventListener("keydown",(e=>{const i=document.querySelector(".iti__selected-dial-code")?.textContent?.trim();"Backspace"===e.key&&t.value.trim().startsWith(i)&&t.selectionStart<=i.length&&e.preventDefault()})),i}import updateButtonsState from"./updateButtonsState.js";import updateProgressBar from"./updateProgressBar.js";import{validateName,validatePhone}from"./validators.js";function validateStep(e){const t=e.querySelectorAll(".quiz__radio");if(!t.length)return!0;const i=Array.from(t).find((e=>e.checked));if(!i)return e.querySelector(".quiz__options")?.classList.add("error"),!1;const r=i.closest(".quiz__option--custom");if(r){if(!r.querySelector(".quiz__option-input")?.value.trim())return e.querySelector(".quiz__options")?.classList.add("error"),!1}return e.querySelector(".quiz__options")?.classList.remove("error"),!0}export function handleNextClick(e,t,i,r){e?.preventDefault();const s=Array.from(t.stepsFieldsets),o=s[i.currentStep-1];o&&validateStep(o)&&i.currentStep<r&&(s.forEach((e=>e.classList.remove("active"))),i.currentStep++,s[i.currentStep-1].classList.add("active"),updateProgressBar(t,i,r),updateButtonsState(t,i,r))}export function handlePrevClick(e,t,i,r){e.preventDefault();const s=Array.from(t.stepsFieldsets);s.forEach((e=>e.classList.remove("active"))),i.currentStep>1&&(i.currentStep--,s[i.currentStep-1].classList.add("active"),updateProgressBar(t,i,r),updateButtonsState(t,i,r))}export function handleSubmitClick(e,t,i,r){e.preventDefault();const{stepsFieldsets:s,successFieldset:o,progressFill:n,counterElement:a,nextButtons:c,prevButtons:u,submitFormButtons:l,quizBottom:d,form:p}=t,m=s[i.currentStep-1];if(!m)return;const f=m.querySelector('input[name="name"]'),_=m.querySelector('input[name="phone"]'),h=m.querySelector(".quiz__error--name"),v=m.querySelector(".quiz__error--phone"),g=validateName(m),q=validatePhone(m);f?.classList.toggle("error",!g),h?.classList.toggle("active",!g),_?.classList.toggle("error",!q),v?.classList.toggle("active",!q),g&&q&&(p&&console.log("Form Data:",Object.fromEntries(new FormData(p).entries())),m.classList.remove("active"),o.classList.add("active"),n.style.width="100%",a.textContent=`Step: ${r}/${r}`,[c,u,l].forEach((e=>e.forEach((e=>e.classList.add("hidden"))))),d.classList.add("disabled"))}export default function updateButtonsState(e,t,i){const{prevButtons:r,nextButtons:s,submitFormButtons:o,quizBottom:n,successFieldset:a}=e;r?s?o?(r.forEach((e=>{e.disabled=1===t.currentStep,e.classList.toggle("disabled",1===t.currentStep)})),s.forEach((e=>e.classList.toggle("hidden",t.currentStep>=i))),o.forEach((e=>e.classList.toggle("hidden",t.currentStep!==i))),n&&n.classList.toggle("disabled",a.classList.contains("active"))):console.error("submit button are missing."):console.error("next button are missing."):console.error("prev buttons are missing.")}import updateButtonsState from"./updateButtonsState.js";import updateProgressBar from"./updateProgressBar.js";export default function updateGiftRadioSelection(e,t,i){if(!t)return void console.error("State object is undefined.");const r=document.querySelectorAll(".quiz__gifts");0!==r.length?r.forEach((r=>{const s=r.querySelectorAll(".quiz__gift");s.forEach((r=>{const o=r.querySelector('input[type="radio"][name="gift"]');o?.checked&&(s.forEach((e=>e.classList.remove("checked"))),r.classList.add("checked")),r.addEventListener("click",(()=>{s.forEach((e=>e.classList.remove("checked"))),o.checked=!0,r.classList.add("checked");const n=document.querySelector(".quiz__fieldsets"),a=n?.querySelectorAll(".quiz__fieldset");if(a&&a.length>0){const s=Array.from(a).indexOf(r.closest(".quiz__fieldset")),o=a[s+1];if(o){n.querySelector(".quiz__fieldset.active")?.classList.remove("active"),o.classList.add("active"),t.currentStep=s+2,updateProgressBar(e,t,i),updateButtonsState(e,t,i)}}}))}))})):console.error("Не знайдено контейнерів подарунків.")}export default function updateProgressBar(e,t,i){const{progressFill:r,counterElement:s}=e;r?s?(r.style.width=t.currentStep/i*100+"%",s.textContent=`Крок: ${t.currentStep}/${i}`):console.error("Progress counter element is missing."):console.error("Progress Fill element is missing.")}export function validateName(e){const t=e.querySelector('input[name="name"]');if(!t)return!1;t.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^a-zA-Zа-яА-ЯЇїІіЄєҐґ'’\-\s]/g,"")}));const i=t.value.trim();return i&&/^[a-zA-Zа-яА-ЯЇїІіЄєҐґ'’\-\s]+$/.test(i)}export function validatePhone(e){const t=e.querySelector('input[name="phone"]');if(!t)return!1;t.addEventListener("input",(e=>{let i=e.target.value;i=i.replace(/[^\d\+\(\)\-\s]/g,"");const r=i.replace(/[^\d]/g,"");if(r.length>12){let e=r.length-12,t=i.length-1;for(;e>0&&t>=0;)/\d/.test(i[t])&&(i=i.slice(0,t)+i.slice(t+1),e--),t--}t.value=i}));const i=t.value.trim(),r=i.replace(/[^\d]/g,"").length;return i&&/^[\d\+\(\)\-\s]+$/.test(i)&&r>=7&&r<=12}import quizSlider from"./components/quiz/quizSlider.js";import setupCustomOptionToggle from"./components/quiz/setupCustomOptionToggle.js";import setupPhoneInput from"./components/quiz/setupPhoneInput.js";import quizBottomMenuFixed from"./components/quiz/quizBottomMenuFixed.js";import progressbar from"./components/quiz/progressbar.js";document.addEventListener("DOMContentLoaded",(function(){quizSlider(),setupPhoneInput(),setupCustomOptionToggle(),quizBottomMenuFixed(),progressbar()}));